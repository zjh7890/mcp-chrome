# Chrome MCP Server æ¶æ„è®¾è®¡ ğŸ—ï¸

æœ¬æ–‡æ¡£æä¾› Chrome MCP Server æ¶æ„ã€è®¾è®¡å†³ç­–å’Œå®ç°ç»†èŠ‚çš„è¯¦ç»†æŠ€æœ¯æ¦‚è¿°ã€‚

## ğŸ“‹ ç›®å½•

- [æ¦‚è¿°](#æ¦‚è¿°)
- [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
- [ç»„ä»¶è¯¦æƒ…](#ç»„ä»¶è¯¦æƒ…)
- [æ•°æ®æµ](#æ•°æ®æµ)
- [AI é›†æˆ](#ai-é›†æˆ)
- [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
- [å®‰å…¨è€ƒè™‘](#å®‰å…¨è€ƒè™‘)

## ğŸ¯ æ¦‚è¿°

Chrome MCP Server æ˜¯ä¸€ä¸ªå¤æ‚çš„æµè§ˆå™¨è‡ªåŠ¨åŒ–å¹³å°ï¼Œé€šè¿‡æ¨¡å‹ä¸Šä¸‹æ–‡åè®® (MCP) å°† AI åŠ©æ‰‹ä¸ Chrome æµè§ˆå™¨åŠŸèƒ½è¿æ¥èµ·æ¥ã€‚æ¶æ„è®¾è®¡ç›®æ ‡ï¼š

- **é«˜æ€§èƒ½**ï¼šSIMD ä¼˜åŒ–çš„ AI æ“ä½œå’Œé«˜æ•ˆçš„åŸç”Ÿæ¶ˆæ¯ä¼ é€’
- **å¯æ‰©å±•æ€§**ï¼šæ¨¡å—åŒ–å·¥å…·ç³»ç»Ÿï¼Œä¾¿äºæ·»åŠ æ–°åŠŸèƒ½
- **å¯é æ€§**ï¼šå¼ºå¤§çš„é”™è¯¯å¤„ç†å’Œä¼˜é›…é™çº§
- **å®‰å…¨æ€§**ï¼šæ²™ç›’æ‰§è¡Œå’ŒåŸºäºæƒé™çš„è®¿é—®æ§åˆ¶

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```mermaid
graph TB
    subgraph "AI åŠ©æ‰‹å±‚"
        A[Claude Desktop]
        B[è‡ªå®šä¹‰ MCP å®¢æˆ·ç«¯]
        C[å…¶ä»– AI å·¥å…·]
    end

    subgraph "MCP åè®®å±‚"
        D[HTTP/SSE ä¼ è¾“]
        E[MCP æœåŠ¡å™¨å®ä¾‹]
        F[å·¥å…·æ³¨å†Œè¡¨]
    end

    subgraph "åŸç”ŸæœåŠ¡å™¨å±‚"
        G[Fastify HTTP æœåŠ¡å™¨]
        H[åŸç”Ÿæ¶ˆæ¯ä¸»æœº]
        I[ä¼šè¯ç®¡ç†]
    end

    subgraph "Chrome æ‰©å±•å±‚"
        J[åå°è„šæœ¬]
        K[å†…å®¹è„šæœ¬]
        L[å¼¹çª—ç•Œé¢]
        M[ç¦»å±æ–‡æ¡£]
    end

    subgraph "æµè§ˆå™¨ APIs å±‚"
        N[Chrome APIs]
        O[Web APIs]
        P[åŸç”Ÿæ¶ˆæ¯]
    end

    subgraph "AI å¤„ç†å±‚"
        Q[è¯­ä¹‰å¼•æ“]
        R[å‘é‡æ•°æ®åº“]
        S[SIMD æ•°å­¦å¼•æ“]
        T[Web Workers]
    end

    A --> D
    B --> D
    C --> D
    D --> E
    E --> F
    F --> G
    G --> H
    H --> P
    P --> J
    J --> K
    J --> L
    J --> M
    J --> N
    J --> O
    J --> Q
    Q --> R
    Q --> S
    Q --> T
```

## ğŸ”§ ç»„ä»¶è¯¦æƒ…

### 1. åŸç”ŸæœåŠ¡å™¨ (`app/native-server/`)

**ç›®çš„**ï¼šMCP åè®®å®ç°å’ŒåŸç”Ÿæ¶ˆæ¯æ¡¥æ¥

**æ ¸å¿ƒç»„ä»¶**ï¼š

- **Fastify HTTP æœåŠ¡å™¨**ï¼šå¤„ç†åŸºäº HTTP/SSE çš„ MCP åè®®
- **åŸç”Ÿæ¶ˆæ¯ä¸»æœº**ï¼šä¸ Chrome æ‰©å±•é€šä¿¡
- **ä¼šè¯ç®¡ç†**ï¼šç®¡ç†å¤šä¸ª MCP å®¢æˆ·ç«¯ä¼šè¯
- **å·¥å…·æ³¨å†Œè¡¨**ï¼šå°†å·¥å…·è°ƒç”¨è·¯ç”±åˆ° Chrome æ‰©å±•

**æŠ€æœ¯æ ˆ**ï¼š

- TypeScript + Fastify
- MCP SDK (@modelcontextprotocol/sdk)
- åŸç”Ÿæ¶ˆæ¯åè®®

### 2. Chrome æ‰©å±• (`app/chrome-extension/`)

**ç›®çš„**ï¼šæµè§ˆå™¨è‡ªåŠ¨åŒ–å’Œ AI é©±åŠ¨çš„å†…å®¹åˆ†æ

**æ ¸å¿ƒç»„ä»¶**ï¼š

- **åå°è„šæœ¬**ï¼šä¸»è¦åè°ƒå™¨å’Œå·¥å…·æ‰§è¡Œå™¨
- **å†…å®¹è„šæœ¬**ï¼šé¡µé¢äº¤äº’å’Œå†…å®¹æå–
- **å¼¹çª—ç•Œé¢**ï¼šç”¨æˆ·é…ç½®å’ŒçŠ¶æ€æ˜¾ç¤º
- **ç¦»å±æ–‡æ¡£**ï¼šåœ¨éš”ç¦»ç¯å¢ƒä¸­è¿›è¡Œ AI æ¨¡å‹å¤„ç†

**æŠ€æœ¯æ ˆ**ï¼š

- WXT æ¡†æ¶ + Vue 3
- Chrome æ‰©å±• APIs
- WebAssembly + SIMD
- Transformers.js

### 3. å…±äº«åŒ… (`packages/`)

#### 3.1 å…±äº«ç±»å‹ (`packages/shared/`)

- å·¥å…·æ¨¡å¼å’Œç±»å‹å®šä¹‰
- é€šç”¨æ¥å£å’Œå·¥å…·
- MCP åè®®ç±»å‹

#### 3.2 WASM SIMD (`packages/wasm-simd/`)

- åŸºäº Rust çš„ SIMD ä¼˜åŒ–æ•°å­¦å‡½æ•°
- ä½¿ç”¨ Emscripten ç¼–è¯‘ WebAssembly
- å‘é‡è¿ç®—æ€§èƒ½æå‡ 4-8 å€

## ğŸ”„ æ•°æ®æµ

### å·¥å…·æ‰§è¡Œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AI åŠ©æ‰‹     â”‚    â”‚ åŸç”ŸæœåŠ¡å™¨   â”‚    â”‚ Chrome æ‰©å±•     â”‚    â”‚ æµè§ˆå™¨ APIs  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                   â”‚                      â”‚                   â”‚
      â”‚ 1. å·¥å…·è°ƒç”¨       â”‚                      â”‚                   â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                      â”‚                   â”‚
      â”‚                   â”‚ 2. åŸç”Ÿæ¶ˆæ¯          â”‚                   â”‚
      â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚
      â”‚                   â”‚                      â”‚ 3. æ‰§è¡Œå·¥å…·       â”‚
      â”‚                   â”‚                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
      â”‚                   â”‚                      â”‚ 4. API å“åº”       â”‚
      â”‚                   â”‚                      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚                   â”‚ 5. å·¥å…·ç»“æœ          â”‚                   â”‚
      â”‚                   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
      â”‚ 6. MCP å“åº”       â”‚                      â”‚                   â”‚
      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚                   â”‚
```

### AI å¤„ç†æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å†…å®¹æå–    â”‚    â”‚ æ–‡æœ¬åˆ†å—å™¨   â”‚    â”‚ è¯­ä¹‰å¼•æ“        â”‚    â”‚ å‘é‡æ•°æ®åº“   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                   â”‚                      â”‚                   â”‚
      â”‚ 1. åŸå§‹å†…å®¹       â”‚                      â”‚                   â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                      â”‚                   â”‚
      â”‚                   â”‚ 2. æ–‡æœ¬å—            â”‚                   â”‚
      â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚
      â”‚                   â”‚                      â”‚ 3. åµŒå…¥å‘é‡       â”‚
      â”‚                   â”‚                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
      â”‚                   â”‚                      â”‚                   â”‚
      â”‚                   â”‚ 4. æœç´¢æŸ¥è¯¢          â”‚                   â”‚
      â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚
      â”‚                   â”‚                      â”‚ 5. æŸ¥è¯¢å‘é‡       â”‚
      â”‚                   â”‚                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
      â”‚                   â”‚                      â”‚ 6. ç›¸ä¼¼æ–‡æ¡£       â”‚
      â”‚                   â”‚                      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚                   â”‚ 7. æœç´¢ç»“æœ          â”‚                   â”‚
      â”‚                   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
```

## ğŸ§  AI é›†æˆ

### è¯­ä¹‰ç›¸ä¼¼åº¦å¼•æ“

**æ¶æ„**ï¼š

- **æ¨¡å‹æ”¯æŒ**ï¼šBGE-small-en-v1.5ã€E5-small-v2ã€Universal Sentence Encoder
- **æ‰§è¡Œç¯å¢ƒ**ï¼šWeb Workers ç”¨äºéé˜»å¡å¤„ç†
- **ä¼˜åŒ–**ï¼šå‘é‡è¿ç®—çš„ SIMD åŠ é€Ÿ
- **ç¼“å­˜**ï¼šåµŒå…¥å’Œåˆ†è¯çš„ LRU ç¼“å­˜

**æ€§èƒ½ä¼˜åŒ–**ï¼š

```typescript
// SIMD åŠ é€Ÿçš„ä½™å¼¦ç›¸ä¼¼åº¦
const similarity = await simdMath.cosineSimilarity(vecA, vecB);

// æ‰¹å¤„ç†æé«˜æ•ˆç‡
const similarities = await simdMath.batchSimilarity(vectors, query, dimension);

// å†…å­˜é«˜æ•ˆçš„çŸ©é˜µè¿ç®—
const matrix = await simdMath.similarityMatrix(vectorsA, vectorsB, dimension);
```

### å‘é‡æ•°æ®åº“ (hnswlib-wasm)

**ç‰¹æ€§**ï¼š

- **ç®—æ³•**ï¼šåˆ†å±‚å¯¼èˆªå°ä¸–ç•Œ (HNSW)
- **å®ç°**ï¼šWebAssembly å®ç°æ¥è¿‘åŸç”Ÿæ€§èƒ½
- **æŒä¹…åŒ–**ï¼šIndexedDB å­˜å‚¨ï¼Œè‡ªåŠ¨æ¸…ç†
- **å¯æ‰©å±•æ€§**ï¼šé«˜æ•ˆå¤„ç† 10,000+ æ–‡æ¡£

**é…ç½®**ï¼š

```typescript
const config: VectorDatabaseConfig = {
  dimension: 384, // æ¨¡å‹åµŒå…¥ç»´åº¦
  maxElements: 10000, // æœ€å¤§æ–‡æ¡£æ•°
  efConstruction: 200, // æ„å»ºæ—¶ç²¾åº¦
  M: 16, // è¿æ¥å‚æ•°
  efSearch: 100, // æœç´¢æ—¶ç²¾åº¦
  enableAutoCleanup: true, // è‡ªåŠ¨æ¸…ç†æ—§æ•°æ®
  maxRetentionDays: 30, // æ•°æ®ä¿ç•™æœŸ
};
```

## âš¡ æ€§èƒ½ä¼˜åŒ–

### 1. SIMD åŠ é€Ÿ

**Rust å®ç°**ï¼š

```rust
use wide::f32x4;

fn cosine_similarity_simd(&self, vec_a: &[f32], vec_b: &[f32]) -> f32 {
    let len = vec_a.len();
    let simd_lanes = 4;
    let simd_len = len - (len % simd_lanes);

    let mut dot_sum_simd = f32x4::ZERO;
    let mut norm_a_sum_simd = f32x4::ZERO;
    let mut norm_b_sum_simd = f32x4::ZERO;

    for i in (0..simd_len).step_by(simd_lanes) {
        let a_chunk = f32x4::new(vec_a[i..i+4].try_into().unwrap());
        let b_chunk = f32x4::new(vec_b[i..i+4].try_into().unwrap());

        dot_sum_simd = a_chunk.mul_add(b_chunk, dot_sum_simd);
        norm_a_sum_simd = a_chunk.mul_add(a_chunk, norm_a_sum_simd);
        norm_b_sum_simd = b_chunk.mul_add(b_chunk, norm_b_sum_simd);
    }

    // è®¡ç®—æœ€ç»ˆç›¸ä¼¼åº¦
    let dot_product = dot_sum_simd.reduce_add();
    let norm_a = norm_a_sum_simd.reduce_add().sqrt();
    let norm_b = norm_b_sum_simd.reduce_add().sqrt();

    dot_product / (norm_a * norm_b)
}
```

### 2. å†…å­˜ç®¡ç†

**ç­–ç•¥**ï¼š

- **å¯¹è±¡æ± **ï¼šé‡ç”¨ Float32Array ç¼“å†²åŒº
- **å»¶è¿ŸåŠ è½½**ï¼šæŒ‰éœ€åŠ è½½ AI æ¨¡å‹
- **ç¼“å­˜ç®¡ç†**ï¼šåµŒå…¥çš„ LRU æ·˜æ±°
- **åƒåœ¾å›æ”¶**ï¼šæ˜¾å¼æ¸…ç†å¤§å¯¹è±¡

### 3. å¹¶å‘å¤„ç†

**Web Workers**ï¼š

- **AI å¤„ç†**ï¼šæ¨¡å‹æ¨ç†çš„ç‹¬ç«‹ worker
- **å†…å®¹ç´¢å¼•**ï¼šåå°æ ‡ç­¾é¡µå†…å®¹ç´¢å¼•
- **ç½‘ç»œæ•è·**ï¼šå¹¶è¡Œè¯·æ±‚å¤„ç†

## ğŸ”§ æ‰©å±•ç‚¹

### æ·»åŠ æ–°å·¥å…·

1. **å®šä¹‰æ¨¡å¼** åœ¨ `packages/shared/src/tools.ts`
2. **å®ç°å·¥å…·** ç»§æ‰¿ `BaseBrowserToolExecutor`
3. **æ³¨å†Œå·¥å…·** åœ¨å·¥å…·ç´¢å¼•ä¸­
4. **æ·»åŠ æµ‹è¯•** ç”¨äºåŠŸèƒ½æµ‹è¯•

### è‡ªå®šä¹‰ AI æ¨¡å‹

1. **æ¨¡å‹é›†æˆ** åœ¨ `SemanticSimilarityEngine`
2. **Worker æ”¯æŒ** ç”¨äºå¤„ç†
3. **é…ç½®** åœ¨æ¨¡å‹é¢„è®¾ä¸­
4. **æ€§èƒ½æµ‹è¯•** ä½¿ç”¨åŸºå‡†æµ‹è¯•

### åè®®æ‰©å±•

1. **MCP æ‰©å±•** ç”¨äºè‡ªå®šä¹‰åŠŸèƒ½
2. **ä¼ è¾“å±‚** ç”¨äºä¸åŒé€šä¿¡æ–¹æ³•
3. **èº«ä»½éªŒè¯** ç”¨äºå®‰å…¨è¿æ¥
4. **ç›‘æ§** ç”¨äºæ€§èƒ½æŒ‡æ ‡

æ­¤æ¶æ„ä½¿ Chrome MCP Server èƒ½å¤Ÿåœ¨ä¿æŒå®‰å…¨æ€§å’Œå¯æ‰©å±•æ€§çš„åŒæ—¶ï¼Œæä¾›é«˜æ€§èƒ½çš„æµè§ˆå™¨è‡ªåŠ¨åŒ–å’Œå…ˆè¿›çš„ AI åŠŸèƒ½ã€‚
